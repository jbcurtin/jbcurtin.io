<html>
  <head>
    <title> How to use 'data-scripts' to setup a local Dask Scheduler and Dask Worker </title>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bulma-divider@0.2.0/dist/css/bulma-divider.min.css"/>
<link rel="stylesheet" type="text/css" href="../static/css/main.css" />
<link rel="stylesheet" type="text/css" href="../static/css/jupyter.css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8">

<!-- Summary Content -->
<meta name="description" content="jbcurtin.io has scripts for managing massive amounts of data to help you or your organization focus more on science" />
<meta name="keywords" content="k8,kubenetes,gcp,aws,sklearn,mlops,machine learning operations,machine learning,ml,modelops,numpy,devops,etl,astronomy,science,dask" />
<meta name="author" content="Joe Curtin" />

<!-- mobile tags -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google SEO -->
<!-- Details: https://support.google.com/webmasters/answer/79812?hl=en -->
<meta name="googlebot" content="index" />

<!-- Open Graph -->
<!-- https://ogp.me/ -->
<meta property="og:title" content="How to use 'data-scripts' to setup a local Dask Scheduler and Dask Worker" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://jbcurtin.io/notebooks/data-scripts-and-Dask.html" />
<meta property="og:description" content="# How to use 'data-scripts' to setup a local Dask Scheduler and Dask Worker

Depending on the science background you're coming from, there is a good chance you'll need to process a large amount of data. `data-scripts` aims to turn AWS S3, Digital Ocean Spaces, Google Cloud Storage, and Microsoft Blog storage into a massive Data Lake. All four major storage provides implement industry best stardards which allows us to store and pull data from across the world assuming we already have an index of the files being stored. `data-scripts` will focus on how to quickly insert data into your algorithms while keeping a mindful awareness of how much it might cost to do that" />
<meta property="og:locale" content="en_US" />
  </head>
  <body>
    <nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item navbar-icon" href="/">
<svg height='100px' width='100px'  fill="#000000" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve"><title>data_16</title><path d="M50.8400002,59.5200005h-1.4599991v10.3100014H42v16.0999985h16.0999985V69.8300018h-7.2599983V59.5200005z   M56.6399994,71.3000031v13.1699982H43.4700012V71.3000031H56.6399994z"></path><path d="M86.3300018,57.8600006V41.75H70.2300034v7.3699989h-8.4000015v-8.7799988H59v-7.5400009h5.7099991v7.3199997h16.0999985V24  H64.7099991v7.3199997h-7.1299973v0.7299995l0,0v8.2700005h-6.7400017V29.5200005h7.2700005V13.4200001H42v16.1000004h7.3699989  v10.8199997h-6.6299973v-8.2700005l0,0v-0.7299995h-7.1300011V24H19.5100002v16.0999985h16.1000004v-7.2999992h5.6699982v7.5400009  h-2.8799973v8.7900009h-8.5200024V41.75H13.7700005v16.0999985h16.1099987v-7.2599983h8.5200024v8.7900009h2.8800011v7.5399971  h-5.670002v-7.329998H19.5100002v16.1099968h16.1000004v-7.3199997h7.1300011v-0.7300034l0,0v-8.2699928h14.7899971v8.2700005l0,0  v0.7300034h7.1299973v7.3199921h16.1500015V59.5900002H64.7099991v7.3200035H59v-7.5300026h2.8300018v-8.7900009h8.4000015  v7.2700005H86.3300018z M71.6900024,43.2200012h13.1800003v13.1699982H71.6900024V43.2200012z M66.1699982,25.4799995h13.1800003  v13.1800003H66.1699982V25.4799995z M43.4699974,28.0599995V14.8800001h13.170002v13.1799994H43.4699974z M34.1499977,38.6599998H21  V25.4799995h13.1500015L34.1499977,38.6599998z M28.4200001,56.3899994H15.2399998V43.2200012h13.1800003V56.3899994z   M34.1500015,74.2299957H21V61.0600014h13.1500015V74.2299957z M66.1500015,61.0499954h13.1999969v13.1800079H66.1699982  L66.1500015,61.0499954z M60.3400002,57.909996H39.8699989V41.7999992h20.4900017L60.3400002,57.909996z"></path><rect x="53.7599983" y="49.1300011" width="1.4599991" height="1.4599991"></rect><rect x="49.3800011" y="49.1300011" width="1.4599991" height="1.4599991"></rect><rect x="45" y="49.1300011" width="1.4599991" height="1.4599991"></rect></svg>
    </a>

    <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div id="navbarBasicExample" class="navbar-menu">
    <div class="navbar-start">
      <div class="navbar-item has-dropdown is-hoverable">
        <a href="/recently-published-notebooks.html" class="navbar-link">
          Notebooks
        </a>

        <div class="navbar-dropdown">
          <a href="/recently-published-notebooks.html" class="navbar-item">
            Recently Published
          </a>
          <a target="_blank" href="https://forms.gle/9QBGGfPEVPBEMj1BA" class="navbar-item">
            Contact
          </a>
          <hr class="navbar-divider">
          <a target="_blank" href="https://github.com/jbcurtin/jbcurtin.io/blob/master/notebooks/README.md" class="navbar-item">
            Create Notebook
          </a>
        </div>
      </div>
    </div>
<div class="navbar-item field navbar-search">
  <p class="control has-icons-right">
    <input disabled="disabled" class="input" type="search" placeholder="Search by Notebok Name...">
    <span class="icon is-small is-right">
      <icon class="fas fa-search"/>
    </span>
  </p>
</div>
      <a href="/about.html" class="navbar-item disabled">
        Who is Joe Curtin?
      </a>

     <a class="navbar-item" href="https://github.com/jbcurtin/jbcurtin.io/issues" target="_blank">
Report Issue
     </a>

    <div class="navbar-end">
<!--
      <div class="navbar-item">
        <div class="buttons">
          <a class="button is-primary">
            <strong>Sign up</strong>
          </a>
          <a class="button is-light">
            Log in
          </a>
        </div>
      </div>
    </div>
-->
  </div>
</nav>


  <section class="hero is-medium is-bold">
    <div class="hero-body hero-image">
      <div class="container has-text-centered">
      </div>
    </div>
  </section>
  <section class="hero">
    <div class="hero-body">
      <h2 alt="Updated: Wednesday, 15. April 2020 03:20PM" class="subtitle page-title"> Friday, 17. July 2020 10:36AM </h2>
  <h1 class="title page-title"> How to use 'data-scripts' to setup a local Dask Scheduler and Dask Worker </h1>
      <div class="container">
        <section class="section">
          <div class="columns">
<div class="jupyter-notebook-styles content is-medium">

<div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput markdown-spacer" data-mime-type="text/markdown">
<p>Depending on the science background you're coming from, there is a good chance you'll need to process a large amount of data. <code>data-scripts</code> aims to turn AWS S3, Digital Ocean Spaces, Google Cloud Storage, and Microsoft Blog storage into a massive Data Lake. All four major storage provides implement industry best stardards which allows us to store and pull data from across the world assuming we already have an index of the files being stored. <code>data-scripts</code> will focus on how to quickly insert data into your algorithms while keeping a mindful awareness of how much it might cost to do that</p>
</div>
</div>
<div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput markdown-spacer" data-mime-type="text/markdown">
<h2 class="subtitle" id="data-scripts">data-scripts<a class="anchor-link" href="#data-scripts">¶</a></h2><p><code>data-scripts</code> has scripts for managing massive amounts of data to help you or your organization focus more on science. <code>data-scripts</code> will focus on using paid service providers in order to help you calculate cost for your grant writing better. Further down in the RoadMap, well add access to free resources like Github, Bitbucket, or something else you'd like to see included? Please send us feedback to,</p>
<ul>
<li>Google Forum: <a href="https://forms.gle/XZB7vK2sAjUPtcHRA" target="_blank">https://forms.gle/XZB7vK2sAjUPtcHRA</a></li>
</ul>
<h2 class="subtitle" id="Dask">Dask<a class="anchor-link" href="#Dask">¶</a></h2><p>Dask is a flexible library for parallel computing in Python. In this tutorial we'll focus on <code>data_scripts</code> helpers to have you start a <code>dask-scheduler</code> and <code>dask-worker</code> on the machine running jupyter</p>
<h2 class="subtitle" id="Tutorial">Tutorial<a class="anchor-link" href="#Tutorial">¶</a></h2><p>Lets go ahead and import the libraries we'll need for the project and start the <code>dask-scheduler</code> and <code>dask-worker</code>. <code>data_scripts</code> is smart enough to know if <code>dask-scheduler</code> or <code>dask-worker</code> are running already. Don't be shy and feel like you must only run the following jupyter cell once, you may run it many times and it'll always return the same <code>dask-scheduler</code> and <code>dask-worker</code></p>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [32]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="CodeMirror cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">distributed</span> <span class="kn">import</span> <span class="n">Client</span><span class="p">,</span> <span class="n">progress</span>
<span class="kn">from</span> <span class="nn">data_scripts</span> <span class="kn">import</span> <span class="n">local</span>

<span class="n">local</span><span class="o">.</span><span class="n">setup_dask</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[32]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>'Sch: 13939 - Work: 13960'</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput markdown-spacer" data-mime-type="text/markdown">
<p>With the Dask scheduler and worker running locally, lets run a simply scripts that'll add 2 to every integer passed to the <code>add()</code> function</p>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [33]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="CodeMirror cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">2</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="s1">'localhost:8786'</span><span class="p">)</span>
<span class="n">awe</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="p">[</span><span class="n">awe</span><span class="o">.</span><span class="n">result</span><span class="p">()</span> <span class="k">for</span> <span class="n">awe</span> <span class="ow">in</span> <span class="n">awe</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[33]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>[3, 4, 5]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput markdown-spacer" data-mime-type="text/markdown">
<p>Results returned, lets clean up our machine to make sure we don't have any non-nessicary programs running in the background</p>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [ ]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="CodeMirror cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">local</span><span class="o">.</span><span class="n">destroy_dask</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>

</div>
          </div>
        </section>
      </div>
    </div>
  </section>
    <footer></footer> 
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"></script>
<script defer src="../static/js/bulma.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-89589148-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-89589148-1');
</script>
  </body>
</html>